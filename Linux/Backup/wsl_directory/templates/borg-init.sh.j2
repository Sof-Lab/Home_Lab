#!/usr/bin/expect

set timeout -1
spawn borg init --encryption=repokey {{ user_borg }}@192.168.11.160:{{ repo }}
expect {
        "*Are you sure you want to continue connecting*" { send -- "yes\r" }
        "Enter*passphrase*" { send -- "{{ passphrase }}\r" }
        "Do you want your passphrase to be displayed*" { send -- "N\r" }
}
expect {
        "*Are you sure you want to continue connecting*" { send -- "yes\r" }
        "Enter*passphrase*" { send -- "{{ passphrase }}\r" }
        "Do you want your passphrase to be displayed*" { send -- "N\r" }
}
expect {
        "*Are you sure you want to continue connecting*" { send -- "yes\r" }
        "Enter*passphrase*" { send -- "{{ passphrase }}\r" }
        "Do you want your passphrase to be displayed*" { send -- "N\r" }
}
expect {
        "*Are you sure you want to continue connecting*" { send -- "yes\r" }
        "Enter*passphrase*" { send -- "{{ passphrase }}\r" }
        "Do you want your passphrase to be displayed*" { send -- "N\r" }
}
expect {
        "*Are you sure you want to continue connecting*" { send -- "yes\r" }
        "Enter*passphrase*" { send -- "{{ passphrase }}\r" }
        "Do you want your passphrase to be displayed*" { send -- "N\r" }
}
expect eof
